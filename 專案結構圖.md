# 🚗 國道1號智慧交通預測系統 - 完整資料夾結構（VD+eTag融合版）

```
traffic_analysis/
├── 📊 data/                           # 數據存放區
│   ├── raw/                           # 原始數據
│   │   ├── vd/                        # VD原始XML檔案
│   │   │   └── YYYY-MM-DD/            # 按日期分類
│   │   │       └── VD_*.xml           # VD動態資訊（1分鐘）
│   │   └── etag/                      # eTag原始數據 🆕
│   │       └── YYYY-MM-DD/            # 按日期分類
│   │           └── ETagPairLive_HHmm.xml.gz  # eTag動態資訊（5分鐘）
│   │
│   ├── processed/                     # 處理後數據
│   │   ├── vd/                        # VD處理數據 ✅
│   │   │   └── YYYY-MM-DD/
│   │   │       ├── target_route_data.csv
│   │   │       ├── target_route_peak.csv
│   │   │       └── target_route_offpeak.csv
│   │   ├── etag/                      # eTag處理數據 🆕
│   │   │   └── YYYY-MM-DD/
│   │   │       ├── etag_travel_time.csv      # 旅行時間數據
│   │   │       ├── etag_flow_data.csv        # 流量數據
│   │   │       └── etag_summary.json         # 統計摘要
│   │   └── fusion/                    # 融合數據 🆕
│   │       └── YYYY-MM-DD/
│   │           ├── vd_etag_aligned.csv       # 時空對齊數據
│   │           ├── fusion_features.csv       # 融合特徵
│   │           └── fusion_summary.json       # 融合摘要
│   │
│   ├── cleaned/                       # 清理完成數據
│   │   ├── vd/                        # VD清理數據 ✅
│   │   ├── etag/                      # eTag清理數據 🆕
│   │   └── fusion/                    # 融合清理數據 🆕
│   │
│   └── archive/                       # 歷史數據歸檔 ✅
│       ├── vd/                        # VD歸檔
│       └── etag/                      # eTag歸檔 🆕
│
├── 🔧 src/                            # 核心程式碼
│   ├── data_loader.py                 # ✅ VD數據載入器（保持不變）
│   ├── data_cleaner.py                # ✅ VD數據清理器（保持不變）
│   ├── flow_analyzer.py               # ✅ AI分析器（保持不變）
│   ├── visualizer.py                  # ✅ 視覺化模組（保持不變）
│   ├── predictor.py                   # ✅ VD預測模組（保持不變）
│   │
│   ├── etag_processor.py              # 🆕 eTag數據處理器
│   ├── fusion_engine.py               # 🆕 VD+eTag融合引擎
│   ├── enhanced_predictor.py          # 🆕 多源融合預測器
│   └── spatial_temporal_aligner.py    # 🆕 時空對齊模組
│
├── 🧪 test_*.py                       # ✅ 測試程式（保持現有）
├── test_etag_processor.py             # 🆕 eTag處理器測試
├── test_fusion_engine.py              # 🆕 融合引擎測試
├── test_enhanced_predictor.py         # 🆕 多源預測器測試
│
├── 🤖 models/                         # AI模型存放
│   ├── vd_models/                     # ✅ VD單源模型（保持不變）
│   │   ├── xgboost_model.json         # R²=1.000
│   │   ├── random_forest_model.pkl    # R²=0.997
│   │   └── lstm_model.keras           # R²=0.029
│   │
│   ├── etag_models/                   # 🆕 eTag單源模型
│   │   ├── etag_xgboost.json
│   │   └── etag_lstm.keras
│   │
│   └── fusion_models/                 # 🆕 多源融合模型
│       ├── fusion_xgboost.json        # VD+eTag融合
│       ├── fusion_lstm.keras          # 時序融合
│       └── graph_neural_net.pkl       # 圖神經網絡
│
├── 📊 outputs/                        # 結果輸出 ✅
│   ├── figures/                       # 圖表檔案
│   │   ├── vd_analysis/               # VD分析圖表
│   │   ├── etag_analysis/             # 🆕 eTag分析圖表
│   │   ├── fusion_analysis/           # 🆕 融合分析圖表
│   │   └── comparison/                # 🆕 模型比較圖表
│   │
│   └── reports/                       # 分析報告
│       ├── vd_reports/                # VD分析報告
│       ├── etag_reports/              # 🆕 eTag分析報告
│       └── fusion_reports/            # 🆕 融合效果報告
│
├── 📚 config/                         # 🆕 配置文件
│   ├── vd_config.yaml                 # VD數據配置
│   ├── etag_config.yaml               # eTag數據配置
│   └── fusion_config.yaml             # 融合系統配置
│
├── 📋 requirements.txt                # ✅ 程式依賴套件清單
└── 📖 README.md                       # 🔄 更新後專案說明文件
```

## 🔄 擴展策略說明

### 保持不變的模組（✅）
- `src/data_loader.py` - VD數據載入器
- `src/data_cleaner.py` - VD數據清理器  
- `src/predictor.py` - VD預測模組（R²=1.000）
- `test_*.py` - 現有測試程式
- `models/vd_models/` - 已訓練的VD模型

### 新增模組（🆕）
- `src/etag_processor.py` - eTag動態資訊處理
- `src/fusion_engine.py` - VD+eTag數據融合
- `src/enhanced_predictor.py` - 多源融合預測
- `src/spatial_temporal_aligner.py` - 1分鐘VD與5分鐘eTag對齊

### 數據流向
```
VD XML (1分鐘) → VD處理器 ✅ → VD預測器 ✅
                    ↓
eTag XML (5分鐘) → eTag處理器 🆕 → 融合引擎 🆕 → 增強預測器 🆕
```